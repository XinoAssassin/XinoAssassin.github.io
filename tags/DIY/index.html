<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <title>Tag: DIY | 随写 - XinoAssassin&#39;s Blog</title>
  
  <meta name="author" content="XinoAssassin Ni">
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="/atom.xml">
  
  <meta name="description" content="Self-recording Blog">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="keywords" content="life,technology,thinking">
  <meta name="HandheldFriendly" content="True">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:type" content="website">
<meta property="og:title" content="随写 - XinoAssassin&#39;s Blog">
<meta property="og:url" content="https://blog.xinoassassin.me/tags/DIY/index.html">
<meta property="og:site_name" content="随写 - XinoAssassin&#39;s Blog">
<meta property="og:locale" content="zh">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="随写 - XinoAssassin&#39;s Blog">
  
  
    <link rel="icon" href="/images/favicon.png">
  
  
  <script type="text/javascript">
    //Export hexo config to js
    var HexoConfig = {
      root: '/',
      search: {
        enabled: 'true'
      }
    };
  </script>

	<script src="https://use.typekit.net/kqs5lfe.js"></script>
  <script>try{Typekit.load({ async: false });}catch(e){}</script>
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
  

</head>
</html>
<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>

  <script>setLoadingBarProgress(20)</script>
  
  <div id="site-wrapper">
    
    <header id="header">
	<div id="header-wrapper" class="clearfix">
		<a id="logo" href="/">
			<img src="/images/logo.png">
			<span id="site-desc">
			  Write Everything.
      </span>
		</a>
		<button id="site-nav-switch">
	    <span class="icon icon-menu"></span>
	  </button>
	</div>
	<aside id="site-menu">
  	<nav>
  		
        <a href="/" class="nav-home nav">
          Home
        </a>
      
        <a href="/about" class="nav-about nav">
          About
        </a>
      
        <a href="/archives" class="nav-archives nav">
          Archives
        </a>
      
    </nav>
	</aside>
</header>
    <script>setLoadingBarProgress(40);</script>
    
    <main id="main" role="main">
      
	<section class="page-header tag">
    <h1>- <span>DIY</span> -</h1>
  </section>






<section class="post-list">
	
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/10/latitude-5285/">
      Latitude 5285 半长测
    </a>
  </h2>
  
  <time>
    Oct 17, 2018
  </time>
  <section class="content">
	  <h2 id="换机缘起"><a href="#换机缘起" class="headerlink" title="换机缘起"></a>换机缘起</h2><p>九月底，借来大概一年的 2014 款 ThinkPad S1 yoga 在频繁的使用过程中终于不堪重用，本来进过水的屏幕彻底好不了了。没办法，总不能让我背着重六斤还没算上电源适配器的大家伙每天上下班挤地铁吧我会死的。于是，九月中旬就开始在淘宝上寻找替代用品，因为 Yoga 算是一台 2 in 1 设备，所以还是打算买一台轻便的类似设备，先是盯上了 2017 年发售的 XPS 12 2 in 1，但是因为这系列都是超低压 CPU，性能上我是无法接受的，于是继续翻，运气还不错，DELL 在 Latitude 系列中也推出了类似的 2 in 1 设备，分为使用常规低压 CPU 和常规分辨率屏幕的 5285/5290 系列和使用超低压 CPU 和高分辨率屏幕的 7285/7290 系列。我也不知道 DELL 是脑子抽风了还是一心想学习巨硬和水果的作死精神，总之 Latitude 5285 正好符合我的需求，国内某宝上面也有几家在卖官翻货，价格也是我正好能承受的范围内（学费垫着），于是在国庆前夕，在一趟回学校的公交车上我点击购买了。</p>
<p><img src="/images/magic-word-by-Lin-Xiaoyu.jpg" title="一句充满魔力的咒语"></p>
<h2 id="购机波折"><a href="#购机波折" class="headerlink" title="购机波折"></a>购机波折</h2><p>顺丰速度还是快，两天到了。我提前下了班回去准备摸新机器。没有做仔细的检查，就看了看外表没有受损屏幕没毛病之后就插盘开始装系统，结果在那个蓝偏紫的首屏，我发现了触摸屏有异样，光标停留在靠近左下角的一个点上，当时还没在意，安装完系统开始用的时候发现真不对，屏幕下部有大范围触摸失灵的情况，马上联系了卖家说明情况，卖家也没多废话就给我说寄回来给我换。</p>
<p>国庆节第一天下午，换的机器到了，这次接手后做了详细的检查，这次发现左下角屏幕不正常，有一小块应该是漏液了。跟卖家反映了情况之后还是愿意给我换一台，但是实在是懒得折腾加上其他配件都到了，也就用了下来。</p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>讲了两大段废话，终于开始正文了，首先先夸一夸这机器。</p>
<h3 id="良心"><a href="#良心" class="headerlink" title="良心"></a>良心</h3><h4 id="预留天线"><a href="#预留天线" class="headerlink" title="预留天线"></a>预留天线</h4><p>相比起北美良心想，DELL 着实良心不少。比如连 ThinkPad X1 这种机型，你只要是不选配 WWAN 模组，那么你到手的机器里面是不会给你预留 WWAN 的天线的。而 DELL 就不一样了，无论哪个配置都是给你预留好了天线，你想要自己加，买张卡装上去就可以了。但比较遗憾的是，5285/5290 这个型号，不购买带有指纹的机型是不会给你来个留指纹位的后盖的，也就是说除非你愿意在后盖上打个孔，不然是无法使用主板上预留的指纹等设备的接口的。</p>
<h4 id="BIOS"><a href="#BIOS" class="headerlink" title="BIOS"></a>BIOS</h4><p>为什么这里要提一句 BIOS 呢？因为我是北美良心想垃圾 BIOS 的长期受害者，原先的国行版 S1 Yoga 使用的单 2.4 GHz 的网卡，而且在 BIOS 里面指定了能够使用的网卡硬件 ID，使得用户无法自行更换更好的网卡。又因为 R6250 的坑爹 2.4GHz 问题，我没有办法让 S1 Yoga 和我的其他设备共存于同一网段下，要么是委曲求全使用性能更差的外部路由当主网关。而 DELL 就不同了，不仅仅不锁设备，BIOS 设定还非常详细实用，除了自带的诊断之外甚至连锁不锁 BIOS 的升降级都给你提供了开关。</p>
<h4 id="手册"><a href="#手册" class="headerlink" title="手册"></a>手册</h4><p>DELL 的 Owner’s Manual 是我见过的最详细的笔记本手册，手册中事无巨细的提供了包括但不限于机型参数、拆机方法、拆卸安装配件的方法等等等等。跟着这份手册来，你完全没有看网上拆机教程的必要。</p>
<h3 id="好"><a href="#好" class="headerlink" title="好"></a>好</h3><h4 id="LTE-amp-GPS"><a href="#LTE-amp-GPS" class="headerlink" title="LTE &amp; GPS"></a>LTE &amp; GPS</h4><p>我现在要吹爆所有预留 M.2 2240 的机器，因为加一个 WWAN 模组加上电信的 20GB 限速卡真的太方便了。Windows 10 对于 WWAN 设备的支持度也相当不错，提供了众多限制后台跑数据的开关，就是传统桌面程序不支持就是了。当时买卡的时候正值 iPhone XS (Max) 发售，Intel 基带背锅的时间段，所以心一狠加了一点钱买了高通的卡（Intel 的卡支持到 Cat.4，而高通的是 Cat.6），实测出来电信 LTE 的速度相当可以，昨天甚至跑出了 4.2 MiB/s 的平均速度。因为这卡还自带 GPS 功能，所以使用系统自带的地图是可以看到实时位置的，照理说其他应用也可以直接使用它提供的 GPS 数据，但最近还没空研究这个，等下次上飞机前看看。</p>
<h4 id="电磁屏"><a href="#电磁屏" class="headerlink" title="电磁屏"></a>电磁屏</h4><p>其实原来的 S1 Yoga 国外版本是自带电磁屏的，但是北美良心想在国行版本上以更贵的价格发售了不带电磁屏的版本。我是一直都想买个带电磁屏的设备来记笔记的，结果到了大四出去实习了才拥有这么一台。DELL 采用的电磁压感技术来自于熟悉的 Wacom，笔并没有随机附送，还好也不算是太贵，将近 300 大洋一支还是比水果家的强不少的。但是还是要吐槽一下巨硬，宣布 OneNote 免费之后，连 Office 365 中默认都不带上桌面版的 OneNote 了，默认启用的是 UWP 版本的 OneNote。不过因为之前用的少也不太清楚这两者有什么区别，总之压感至少是没有问题的。</p>
<h4 id="散热"><a href="#散热" class="headerlink" title="散热"></a>散热</h4><p>当初机子还没到手的时候寻找了一些国内用户的评测来看，不知为何这模具的散热相当了得，虽然是主动散热但是平常你完全感觉不到风扇的声音。而温度，比如现在我正在使用电池码字，性能设置是开到 100% 的，但是 CPU 频率不高，温度也就只有接近 40℃ ；到手时也做过温度压力测试，甚至可以将 7300U 维持满整个 28 秒不泄，以这个体积的散热系统来说已经是合格的了，更为惊喜的是，BIOS 设定相当给力，长时间烤机也还是可以维持到默频 2.6GHz 之上。而看到中文论坛有说统一模具但是换用八代低压 U 的 5290 甚至可以压住四核八线程的低压 i7。所以我对于这一块是相当满意的。</p>
<h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><p>机器的扩展是一个 USB 3.1 Gen 1 Type A 以及两个支持 DisplayPort 输出的 USB-C 口，虽然 USB-C 口不支持 Thunderbolt™ 3，但是两个之多的数量比起只带一个 USB Type A 的 Surface Pro 来已经完全是秒杀了。另外 DELL 在推进 USB PD 上也算是比较积极的，在 BIOS 中将供电方式设置为 ExpressCharge 之后就可以开启快充，实测在用 Apple 87W 适配器时充电真的快了很多，而自带的适配器是 45W 的。</p>
<h4 id="携带"><a href="#携带" class="headerlink" title="携带"></a>携带</h4><p>携带真的非常方便，键盘一盖就跟平板毫无区别直接拿走。值得一提是这个键盘（保护盖），它 有 键 程。据某位不愿意透露姓名的沙包说，只要是有键程的键盘就比采用新键盘的 MBP 的强，实际体验了一下，果真如此，MBP 上的新键盘甚至不如 Macbook 12 上面的那块同样几乎没有键程的键盘。并且触摸板面积也不算太小，就是手感上确实比不上 S1 Yoga 那个“带弹簧”的触摸板。</p>
<p>因为自带自适应的支架，有桌子的时候竖着放上面一按支架就弹出来了，就是支架的最小角度稍微大了一些，在床上用的时候不是太舒服。</p>
<h3 id="不太行"><a href="#不太行" class="headerlink" title="不太行"></a>不太行</h3><h4 id="屏幕"><a href="#屏幕" class="headerlink" title="屏幕"></a>屏幕</h4><p>夸了电磁屏，但是对于这块屏幕还是有不满意的地方。不知道 DELL 是为了节约成本或是其他什么原因，分辨率虽然完全合格，1920 x 1280 在 12 寸屏幕上看起来已经是相当精细了。但是在色彩方面，可能就不能说准了，跟几年前的 U2312HM 比起来，色彩甚至出现了一些过饱和，而且面板应该是少了一层过滤，屏幕在镜头前存在彩虹纹，反射光源时同样可见。</p>
<h4 id="续航"><a href="#续航" class="headerlink" title="续航"></a>续航</h4><p>虽然自带的电池容量还是有 44Wh 之多，但是不知道是因为挂在 LTE 网络上同时开启了 GPS 的缘故还是 Windows 10 本身的耗电量比较大的问题，一般典型外带最长只有五六个小时电量就降到 30% 左右了（后台开着 KanColle）。也就算是基本够用的水平吧，不过至少不是超低压 CPU，这个水平已经很满意了，只是希望电池能在大点，把缺失的指纹模块那部分的空间利用起来就好了。</p>
<h2 id="抱怨两句"><a href="#抱怨两句" class="headerlink" title="抱怨两句"></a>抱怨两句</h2><p>这台机器买的我是非常的舒服，该有的都有，还带了一些惊喜给我，估计之后长久都会带着它跑来跑去了。但是提到跑来跑去就有话要说了，把本来打算写《杂》的话搬到这里来讲吧。</p>
<p>九月头上开始实习之后，深刻体会到了你国上班一族的现状，早起挤地铁挤公交，睡眠不足靠咖啡因撑，中午午休睡成一片，晚上疯狂加班。每天都是固定的日子，也难怪会把人的意志给消磨干净，难得的周末补两天觉打打游戏就没了，自然的也就没什么心思想别的东西了。</p>
<p>所以如果有还没上大学或者是刚开始大学生涯的同学，记得真的要在大学谈次恋爱，不然毕业之后真的没有时间去认真谈恋爱了。</p>
<p><code>&gt;&gt;&gt;endl;</code></p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/DIY/">DIY</a><a class="tag-link" href="/tags/Hardware/">Hardware</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/05/new-laptop/">
      再见，老伙计；你好，新朋友
    </a>
  </h2>
  
  <time>
    May 12, 2018
  </time>
  <section class="content">
	  <p>前略，上周日，一次突如其来的停电袭击之后，我那本来就已经处在崩溃边缘的 K610D 终于不得行了，进系统之后必蓝屏，而且此次蓝屏的 Code 还不一样（说实话可能我基本上把 Windows 10 能出现的蓝屏代码全看了一遍了）。花了半天尝试了各种修复后故障依旧，没有办法之下，只得跟父亲申请新机器的资金——其实已经延长了非常久的时间了，自从两年前进过水之后我就知道必然会有这么一天到来的——再花了四分之一天在限定资金下确定了现在这台新伙计，用的蓝天 W65KJ 的模具。<br>配置最基本两个大件新旧对比：</p>
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">K610D-i7d2</th>
<th style="text-align:center">W65KJ</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">CPU</td>
<td style="text-align:center">Intel Core i7 4710MQ</td>
<td style="text-align:center">Intel Core i3 8100</td>
</tr>
<tr>
<td style="text-align:center">GPU</td>
<td style="text-align:center">NVIDIA GeForce 940M</td>
<td style="text-align:center">NVIDIA GeForce GTX 1050</td>
</tr>
</tbody>
</table>
<p>之所以新机器选择了 W65KJ, 原因有二：</p>
<ol>
<li><p>散热强劲</p>
<p>因为用的是桌面级 CPU, 所以 CPU 部分是用了双热管来压的，而且 CPU 与 dGPU 各用了一个风扇来分散热量。之前因为在 K610D 上面吃尽了散热差的苦头，所以这次舍弃了拥有更好扩展接口的另一个型号，也要散热系统非常强劲。</p>
<p>测试下来非常令我满意，在风扇全开的情况下能把 CPU 压在 65 度附近，四核频率稳定标称的 3.6 GHz 运行，dGPU 也压的非常好。</p>
</li>
<li><p>可扩展性强</p>
<p>因为用的是桌面级 Core 8 代 CPU, 所以机器上直接给了两个 M.2 接口，两个均支持 NVMe 协议。而且因为散热系统仍有余裕，所以后续升级至 Core i5 是非常可行的提升性能的办法，甚至 i7 都有一试之力。</p>
</li>
</ol>
<p>京东速度还算是不错，第二天周一中午机器到手的时候是 8GB 2400 的英睿达单条 DDR4 内存加上一条金士顿的 128 GB 的 TLC 条子，成本原因自然是走 SATA 协议的，但是够用是够用了，就是容量太小了，于是当天下午就下单了另一条英睿达 DDR4 2400 8GB 和三星的 SM961 256GB, 最谢天谢地的是最近的内存条和 SSD 都有一些降价，不然得是大出血。</p>
<p>犹豫是周一下午五点——一般快递停收时间——之后才淘宝下的单，所以内存到了周五才到，而 SM961 却到了周三还没发货，咨询了卖家：“没货，明天或者后天到”。我可去你妈的，换店，之前物色 NVMe SSD 的时候在 XG3 和 SM961 之间纠结，然后这时候在淘宝上看到一家拆机 XG3 512GB 才卖九百出头的店，果断付款。</p>
<p>然后今天周六下午，终于是到手了。赶紧插上装好东芝家的驱动跑个分，果然 NVMe + MLC 的组合数据上非常吓人。马上迁移系统，结果文件都是复制完了却在启动上栽了跟头。</p>
<h2 id="系统迁移引导处理"><a href="#系统迁移引导处理" class="headerlink" title="系统迁移引导处理"></a>系统迁移引导处理</h2><p>在 UEFI + GPT 环境下直接复制全盘复制文件到新分区是可行的，前提是你的 NVMe 在原来的系统中要被认过一次，系统的设备管理器中的“存储控制器”一项出现了 NVMe 控制器，这是迁移可行的大前提。</p>
<p>文件复制完毕之后，你还需要做两个事情，否则，是进不去新驱动器上的系统的：</p>
<h3 id="改变注册表中默认分配盘符"><a href="#改变注册表中默认分配盘符" class="headerlink" title="改变注册表中默认分配盘符"></a>改变注册表中默认分配盘符</h3><p>首先你需要一个可用的注册表编辑器，定位到 <code>HKLM\SYSTEM\MountedDevices</code> 下，将 <code>\DosDevices\新系统所在的盘符:</code> 的值复制下来。挂载上新系统的注册表文件（通过文件-加载配置单元读取 <code>Windows\System32\Config\SYSTEM</code> 文件），然后定位到相同的项，将之前复制的值覆盖掉 <code>\DosDevices\C:</code> 的值即可。</p>
<h3 id="写入新的-BCD-配置"><a href="#写入新的-BCD-配置" class="headerlink" title="写入新的 BCD 配置"></a>写入新的 BCD 配置</h3><p>然后你需要一块系统安装盘，启动到系统安装界面，调出命令行(Shift + F10), 然后将新系统所在的分区的盘符挂成 “C”, 同时要给新硬盘上的 ESP 分区分配一个盘符，使程序能够写入文件，大概过程如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">diskpart</span><br><span class="line">list disk &apos;查看磁盘列表</span><br><span class="line">sele disk x &apos;x 是你新磁盘在列表中的编号</span><br><span class="line">list part</span><br><span class="line">sele part x &apos;x 是你新系统所在的分区编号</span><br><span class="line">assign letter=C &apos;分配新系统所在分区的盘符为 C</span><br><span class="line">sele part y &apos;y 是这块磁盘上的 ESP 分区编号</span><br><span class="line">assign letter=Y &apos;给 ESP 分区分配 Y 的盘符</span><br><span class="line">exit &apos;退出 diskpart</span><br><span class="line">bcdboot C:\windows /s Y: [/v] &apos;将 C:\Windows 作为启动目录写入到 Y: 上，&quot;/v&quot; 为可选参数，即详细模式</span><br></pre></td></tr></table></figure>
<p>重启之后就搞定了。</p>
<hr>
<p>那么，这台机子就这么算是正式启用了吧，之后会攒钱买块 Core i5 给换上就算是完全大功告成了，但愿它能陪我长一些时间吧。</p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/DIY/">DIY</a><a class="tag-link" href="/tags/Hardware/">Hardware</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/02/install-an-archlinux/">
      Arch Linux 小折腾记
    </a>
  </h2>
  
  <time>
    Feb 13, 2018
  </time>
  <section class="content">
	  <p>久闻 Arch Linux (下文简称 Arch )大名，在虚拟机上多次完成过了整个系统的安装与图形界面的配置，也试过了 KDE 和 GNOME 这两个大名鼎鼎的图形环境，深切体会到了 Arch Linux 的四大原则：</p>
<ul>
<li>Simplicity</li>
<li>Modernity</li>
<li>Pragmatism</li>
<li>User Centrality</li>
</ul>
<p><del>Pacman 是最好的包管理器</del></p>
<hr>
<p>我分别在自己的台机上和一台 ThinkPad S1 Yoga 2014 上安装 Arch. 具体过程跟着官方 <a href="https://wiki.archlinux.org/index.php/Installation_guide" target="_blank" rel="noopener">Installation Guide</a> 走就行了，Wiki 中的注意事项也是比较全面了，本文写几个小注意点。</p>
<h2 id="Btrfs"><a href="#Btrfs" class="headerlink" title="Btrfs"></a>Btrfs</h2><p>不知道 Btrfs 的我建议你马上查 Wikipedia.</p>
<p>Arch 的安装 ISO 环境中是自带了 Btrfs 的工具包和支持的，但是在 base 软件包中不包含这些，所以你需要手动安装 <code>btrfs-progs</code> 这个包，然后在 /etc/mkinitcpio.conf (注意是在 <code>arch-chroot</code> 这一步之后)中的 HOOK 一行中添加 btrfs, 之后跑一遍 <code>mkinitcpio -p linux</code>, 看到输出中有 btrfs 即可。</p>
<p>关于 btrfs 的配置问题，参见官方 Wiki, 也可以参考 <a href="https://github.com/egara/arch-btrfs-installation" target="_blank" rel="noopener">egara/arch-btrfs-installation</a>.</p>
<h2 id="Boot-Loader"><a href="#Boot-Loader" class="headerlink" title="Boot Loader"></a>Boot Loader</h2><p>在 Boot Loader 的选择中，我个人还是比较倾向于直接使用 systemd 集成的 systemd-boot, 懒得再装个 GRUB.</p>
<p>虽然 systemd-boot 局限性非常大，比如它只能加载 EFI 可执行文件比如 bootmgfw.efi, vmlinuz-linux.</p>
<p>如果选择了 systemd-boot 作为 Boot Loader, 那么就需要在 <code>arch-chroot</code> 后手动运行一次 <code>bootctl --path=$ESP install</code> 来把引导程序安装进 EFI 分区中并向 UEFI 界面注册这个引导器，之后你在启动时按 F12 就可以看到一个 Linux Boot Loader.</p>
<p>但是如果只是将 Boot Loader 安装到了 EFI 分区还不足以让它引导我们进 Arch, 仍然需要在 /boot/loader/entries/ 这个目录下建立新的 conf 文件，里面的内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title Arch Linux</span><br><span class="line">linux /vmlinuz-linux</span><br><span class="line">initrd /initramfs-linux.img</span><br><span class="line">options root=(PARTUUID|PARTLABEL)=xxxxxxxxxxxxxxxxxxxxxxxx rw</span><br></pre></td></tr></table></figure>
<p>如果使用的是 Intel 的 CPU 并且有安装 <code>intel-ucode</code> 包，那么在第3行之前再加一行 <code>initrd /intel-ucode.img</code> 启用它。</p>
<p>建立完了引导所需的系统 config, 需要在 /boot/loader/loader.conf 中的 default 一行中指定刚才建立的 config 文件名，然后使用 Linux Boot Loader 引导器就会默认进入 Arch Linux.</p>
<h2 id="双系统与时钟"><a href="#双系统与时钟" class="headerlink" title="双系统与时钟"></a>双系统与时钟</h2><p>感谢 UEFI 标准，现在我们可以非常方便地组建双系统 (Windows + Linux) 环境。</p>
<p>如果使用的 Boot Loader 是 systemd-boot, 那么它会自动检测 Windows 的存在，并且在选择菜单自动提供一个 Windows 的选项，这个选项的配置名为 <code>auto-windows</code>, 选择它会运行 /boot/Microsoft/Boot/bootmgfw.efi 然后就是 Windows 的流程了。</p>
<p>双系统有一个很大的问题，就是时钟。Windows 默认往 BIOS 写入本地时间，而不是 Linux 标准的 UTC, 这就会导致你从 Windows 切换过去后时间会+8, 也就是按你的时区调整然后又写回到 BIOS 中。从 Linux 切换过去，Windows 认为是本地时间，于是显示给你的实际上是 UTC. 所以为了解决这个问题，在安装 Arch 时，使用 <code>hwclock --hctosys -l</code> (将硬件时间作为本地时间读入系统), 而不是 Guide 上所用的 <code>hwclock --systohc</code>(将系统时间写入 BIOS 并且是 UTC).</p>
<p>之后启动到 Windows, 注册表定位到 <code>HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation</code> 添加一个 DWORD, 名为 <code>RealTimeIsUniversal</code> 值为 1, 即可实现 Windows 往硬件中写入的时间是以 UTC 为标准而不是本地时间。</p>
<h2 id="systemctl-enable"><a href="#systemctl-enable" class="headerlink" title="systemctl enable"></a>systemctl enable</h2><p>由于 Arch Linux 的哲学，大部分软件包在安装之后也并不会自动启用，需要你手动 <code>systemctl enable|start xxxx</code>. 尤其要留意的是，还在 ISO 环境下安装系统的时候就要把 dhcpcd 这个服务给 enable 了，解决你进系统之后发现连不上网络想半天不知道问题出在哪里的问题。当然这是针对有线网卡，而大部分无线网卡，我推荐直接使用 Network Manager 搞定。当然使用无线网卡的首次联网你还是需要如下步骤：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip link set dev interface up</span><br><span class="line">iw interface scan</span><br><span class="line">wpa_supplicant -B -i interface -c &lt;(wpa_passphrase SSID Password)</span><br></pre></td></tr></table></figure>
<p>还有一点需要注意的是，Arch 的 Shadowsocks-libev 默认读取的配置目录在 /etc/shadowsocks/, 与 Python 版相同的目录而不是传统的 /etc/shadowsocks-libev/ 下，启用它的命令为 <code>systemctl enable shadowsocks-libev@配置文件名.service</code> .</p>
<h2 id="Intel-有线网卡的坑"><a href="#Intel-有线网卡的坑" class="headerlink" title="Intel 有线网卡的坑"></a>Intel 有线网卡的坑</h2><p>当你机器上使用的网卡的是 Intel Ethernet Connection I21x 的时候，你要小心了，在安装 Arch 之前，在 Windows 中安装 Intel 的官方驱动，然后在网卡的硬件配置面板中将所有的网络唤醒选项给关闭，这可以有效防止你进入 Arch 环境之后获取不到任何的网络信息导致连不上网。</p>
<p><code>&gt;&gt; endl;</code></p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/DIY/">DIY</a><a class="tag-link" href="/tags/Programming/">Programming</a><a class="tag-link" href="/tags/杂/">杂</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/01/router/">
      家庭网络和路由
    </a>
  </h2>
  
  <time>
    Jan 21, 2018
  </time>
  <section class="content">
	  <p>在<a href="https://blog.xinoassassin.com/2018/01/holiday-0/" target="_blank" rel="noopener">上一篇文章</a>中，我提到回家要干的一件事情就是更换路由。把新买的二手<del> Nepgear</del> Netgear R6250 替换掉用了两年多的洋垃圾 RT-N16. 更换到现在已经过去一天半左右的时间了，遇到了几个问题。</p>
<p><img src="/images/HomeNetwork.png" alt="HomeNetwork"></p>
<p>拿快递开箱换上配置好一共花了不到半小时就搞定了，然后问题开始浮现：我的 ThinkPad S1 Yoga 连接不到 R6250 提供的 2.4G 无线网络。开始认为是笔记本上那块单频 Intel 7260 的锅，然后把 R6250 的 2.4G 网的频宽从 40MHz 降到了 20MHz, 结果仍然有时断时续的情况出现，认为还是 7260 这张网卡的问题，准备更换网卡。但北美良心想在 BIOS 中做了限制，更换起来很麻烦，所以一筹莫展。结果今晚日常拿起手柄 V 的时候突发奇想连一下无线，发现根本找不到 2.4G 网的 SSID, 就算不容易刷出来了也是连接不上的状态，遂开始感觉是 R6250 的问题。Google 之，发现使用第三方固件的 R6250 大多都存在这种问题，比如 2.4G 网不稳定，2.4G 根本连不上什么的。但是我又不想用回官方那个烂的很的固件，于是掏出从学校快递回家，原本准备用来替换掉配电箱中的主路由的那只被改装过的 TP-Link WR720N, 本就刷好了 LEDE, 稍微改了几个配置就当 2.4G 的 AP 来用了，连接非常稳定。</p>
<p>把 DMZ 主机指定到自己的机器之后，直接通过 DDNS 域名进行内网访问，速度非常快，延迟非常低，爽。</p>
<p>然后用着用着，无心看到 IPv6 的地址头不对，而且怎么本地 DNS 域也变成了 LEDE 了？一看果然是小的 AP 在作怪，上面的 DHCP 服务器没关，也就是一个网段中有两个设备在 DHCP 广播。遂关闭之，顺带着把 Lan 口设置中的网关确定为 2.1, 并把 Dnsmasq 的服务一起关了，问题消失。</p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/DIY/">DIY</a><a class="tag-link" href="/tags/Hardware/">Hardware</a><a class="tag-link" href="/tags/杂/">杂</a>
	  </div>
    

  </section>
</article>
  
</section>


      <script>setLoadingBarProgress(60);</script>
    </main>
    
    <footer id="footer" class="clearfix">
  
  
	<div class="search">
	  <form name="searchform" id="searchform" class="u-search-form">
	    <input type="text" id="searchinput" class="u-search-input" placeholder="Looking for something?">
	    <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit">
	      <span class="icon icon-search"></span>
	    </button>
	  </form>
	</div>
	

	<div class="social-wrapper">
  	
      
        <a href="mailto:phnjs211@gmail.com" class="social email" target="_blank" rel="external">
          <span class="icon icon-email"></span>
        </a>
      
        <a href="https://github.com/xinoassassin" class="social github" target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="https://twitter.com/xinoassassin" class="social twitter" target="_blank" rel="external">
          <span class="icon icon-twitter"></span>
        </a>
      
        <a href="http://weibo.com/XiDeAssassin" class="social sina-weibo" target="_blank" rel="external">
          <span class="icon icon-sina-weibo"></span>
        </a>
      
        <a href="/atom.xml" class="social rss" target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
    
  </div>
  
  <div>Theme <span class="codename">Typescript</span> designed by <a href="https://rakugaki.me/" target="_blank">Art Chen</a>,<br> modified by XinoAssassin.</div>
  <div>&copy; <a href="/">随写 - XinoAssassin&#39;s Blog</a></div>
  
</footer>


    <script>setLoadingBarProgress(80);</script>
    
  </div>

  



<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>

<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "google";
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
  
</body>
</html>
