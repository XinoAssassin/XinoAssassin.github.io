<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>Tag: Everything | 随写 - XinoAssassin&#39;s Blog</title>
  
  <meta name="author" content="XinoAssassin Ni">
  
  
  <link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="/atom.xml">
  
  <meta name="description" content="A minimal hexo theme." />
  <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
  <meta name="keywords" content="hexo,theme,typescript" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta property="og:type" content="website">
<meta property="og:title" content="随写 - XinoAssassin&#39;s Blog">
<meta property="og:url" content="https://xinoassasssin.github.io/tags/Everything/index.html">
<meta property="og:site_name" content="随写 - XinoAssassin&#39;s Blog">
<meta property="og:locale" content="zh">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="随写 - XinoAssassin&#39;s Blog">
  
  
    <link rel="icon" href="/favicon.png">
  
  <script src="https://use.typekit.net/kqs5lfe.js"></script>
  <script>try{Typekit.load({ async: true });}catch(e){}</script>
  <link rel="stylesheet" href="/style.css">
  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
  

</head>

<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>

  <script>setLoadingBarProgress(20)</script>
  
  <div id="site-wrapper">
    
    <header id="header">
	<div id="header-wrapper" class="clearfix">
		<a id="logo" href="/">
			<img src="/images/logo.png" />
			<span id="site-desc">
			  Write Everything.
      </span>
		</a>
		<button id="site-nav-switch">
	    <span class="icon icon-menu"></span>
	  </button>
	</div>
	<aside id="site-menu">
  	<nav>
  		
        <a href="/" class="nav-home nav">
          Home
        </a>
      
        <a href="/about" class="nav-about nav">
          About
        </a>
      
        <a href="/archives" class="nav-archives nav">
          Archives
        </a>
      
    </nav>
	</aside>
</header>
    <script>setLoadingBarProgress(40);</script>
    
    <main id="main" role="main">
      
	<section class="page-header tag">
    <h1>- <span>Everything</span> -</h1>
  </section>






<section class="post-list">
	
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/03/boy-loves-girl/">
      我的单相思
    </a>
  </h2>
  
  <time>
    Mar 28, 2018
  </time>
  <section class="content">
	  <section style="text-align: center;"><br><br>今天，我来写一个男孩的恋爱故事：<br><br>—<br><br>男孩遇到女孩是在他十二岁的时候<br>那是初一刚开学<br>他带着被不公划分的愤懑来报了到<br>一眼望去，除了几个小学同班的，别的都不认识<br>就这样，他开始了他的初中生涯，一晃，到了初一下<br>男孩发育的晚，个子在那时的班上显得特别矮，于是便一直占据着第一排的座位<br>有一天，他注意到左边隔了一条“走廊”的女孩<br>“啊你是我小学隔壁班的那谁”，男孩想起来了<br>女孩很好奇，“我很出名吗”<br>“没，只是听过你的名字”，男孩解释道<br>有时他们就这样有一句没一句的聊着<br><br>—<br><br>男孩被家里管得紧，心思却野的很<br>在班上干了不少被人唾弃的事情<br>那个学期末，他考了个很次很次的排名，被骂的很惨<br>从此，他过上了周末补课的生活<br>整个初二，他都在跟成绩斗争着<br><br>—<br><br>一晃眼，初三了<br>男孩挺拼的，终于把成绩搞回去了<br>但心思野是没办法治的<br>荷尔蒙作祟下，他对一直都留意着的女孩产生了兴趣<br>他开始频繁的找女孩聊天，就像无数个人生活中发生的那样，他们开始慢慢互相了解<br>男孩突然发现自己早就喜欢上了女孩<br>他拙劣地表演着自己简单的喜欢<br>十一月<br>一次考试之后，班主任要调整座位<br>男孩略施小计就提前看到了班主任留在班级电脑上的新座位表<br>他看到班主任把他和女孩分在了一起<br>他高兴的差点晚上差点没睡着<br>第二天中午，换完座位的他，坐到了整个教室最左侧第三排靠窗的位置，旁边就是他喜欢的女孩<br>有那么一瞬间，他觉得自己是幸福的<br>成为同桌之后，说话更方便了，再加上男孩朋友们的“助攻”，感情增进的很快<br>在一个温暖冬日，即将放学的时候，男孩的告白不当心脱口而出了<br>“我喜欢你啊”<br>男孩眼中映着的女孩的脸，是窗外即将落山的夕阳的颜色<br>男孩也不知道发生了什么，日子一切照旧，嬉笑打闹，哭啼皆有<br>男孩是幸运的，从十一月之后，班主任再也没有调整过座位<br>直到第二个学期开始<br>即将分离的气氛开始浓重，中考也成了生活的绝对重心<br>男孩和女孩不知道怎么了，拌嘴的频率越来越高<br>两次模拟考之后，保送高中的名单确定了下来<br>男孩离县上最好高中的保送资格一步之遥<br>虽然他早就预感到了这个事实，但不禁还是有些受到打击<br>于是，班上走掉了许多人，座位又要调整了<br>这次，女孩坐到了男孩的左前方，男孩的同桌成了他当时最好的朋友W<br>男孩发现，女孩和W的关系好的不行<br>他们经常煲电话粥，上课还疯狂传纸条<br>男孩心里有些酸，终于有天发作了，一生气就一直不理会那两人<br>他们觉得很莫名奇妙，让男孩生了几天闷气，最后自然的消气了<br>清明节，女孩的爷爷去世了，第二天她来上课的时候，眼眶红的很<br>又一次模拟考，男孩的成绩出现了大幅下滑<br>老师开始找他，家长也在施加压力<br>即使是这样，最后男孩还是买了两分才进那所最好的高中<br>而女孩，则是考去了另一所学校<br>于是，男孩彻底与女孩分开了，物理距离上<br>考完之后，男孩和女孩一起在学校帮忙的时候<br>班主任和数学老师开他们玩笑<br>“我发现男孩上课不认真的原因是一直在看女孩”，数学老师笑嘻嘻的<br>男孩脸一红，瞟了一眼女孩，发现女孩也在看他<br>“要是一直都能在一起多好啊”，男孩在心中叹了口气<br>突然他想起来，女孩的QQ都还没加上<br>在他们还是同桌的时候，女孩把自己的密码给了男孩，虽然她说很多人都已经有她的密码了<br>男孩偷偷的把自己的密码跟女孩改成一样的，一直用到现在<br>半夜，男孩登上女孩的QQ，把自己加了进去<br>第二天，学校又要开班会，结束之后，女孩突然就问男孩<br>“你是不是登我Q了”<br>“是啊，我加了我自己”<br>“那你为什么不把分组给改了？”<br>“忘了”，男孩摸了摸头<br>女孩生气了，她把拳头砸在男孩肩上<br>男孩突然被重击了一下，吃痛，无名火也冒上心头<br>但他转念一想，还是他错在先，于是就离开了<br>正巧，下着雨，他搭了同学的车回家<br>一路上，车载音响都在放着信乐团的《离歌》<br>“真是切合今天呢”，男孩心想<br>就这样，一个暑假，双方谁也没理谁<br>男孩一直都想找机会道歉，但那句“对不起”却始终出不了口<br><br>—<br><br>马上，高中也要正式开学了<br>剩不了几天的时候，女孩突然联系了男孩<br>“今晚我要翘家找一个网友”，女孩说<br>网友是她很久之前就认识的一个大男孩<br>于是男孩陪她聊到很晚很晚<br>突然间，那几天，他们又迅速地熟络了起来<br>男孩也趁机把自己最好的朋友G介绍给了她<br>她看起来对G非常感兴趣<br>那几天，即使是在军训期间，他们三个也经常聊到很晚<br>G比男孩女孩都小上一级，因为父亲跟男孩父亲是发小，于是也就认识了<br>很快男孩发现自己和G有许多共同话题可以聊<br>开学了，男孩的手机被缴了<br>但男孩还是成功地约出了女孩，虽然地点是在G的家里<br>女孩和G第一次见了面<br><br>—<br><br>接下去的发展，简直是一个疯了的剧本家写出来的<br>女孩和她班上的一个男孩恋爱了，这不是她的初恋<br>男孩很迟才知道这件事<br>男孩像疯了一样地往女孩的空间留言<br>他终于真的受不了了<br>男孩把事情扩散的很大，连不在一个学校的友人W都打电话过来问男孩是不是真的要放弃了<br>“我累了，想休息”，男孩认真地回答<br>快要到女孩生日了，男孩认真的准备了她提到过想要的书<br>然后写了将近三十页A4纸的文字一起寄给了女孩<br>根据女孩的空间留言板记录看，她那几天一直在哭<br>男孩心也痛，自己为什么这么爱吃醋呢，他想<br>他也没想到自己会如此伤害到女孩<br>“唉，要不道个歉态度软下来继续做朋友吧”，他内心的一半这么想<br>“不行，她谈了恋爱还不告诉我，我接受不了当备胎的感觉，要惩罚她”，另外一半这么想<br>于是，就在每天的纠结中，迎来了寒假<br>男孩认识G后不久就被安利了不少动画片<br>高中刚开始那个国庆，他开始了萌二生涯<br>于是，整个寒假都几乎用来补番<br>快要开学的一天，女孩发了一条煽情说说，不知道求了多少人来转发好让男孩看见<br>男孩气早就消了，心也软的差不多了<br>他只是想再撑一撑给自己留存一些脸皮<br>然后开学前一晚，女孩和她的男朋友同时找到男孩来抱怨，他们即将分手<br>男孩哭笑不得<br>因为新一届实行的高一第一学期结束就分班的制度<br>男孩又一次来到了新的班级<br>“哦，原来你就是那个谁啊”，男孩发现不少人都听过他的名字<br>以他最意想不到的方式<br>进入高中之后男孩的心思没有放在学习上太多<br>而是一天到晚不务正业<br>他从高中进校开始就被打上了“问题学生”的标签<br>什么高中第一学期开学第二周搞错周一到校时间<br>晨会的时候，自己班级正巧站在正对着校门的台阶上目送他进校门<br>什么第二学期上课玩touch被收被赶出晚自修作为惩罚<br>总而言之，读书劲大不如前了<br>男孩稀里糊涂的混着日子<br>终于快放暑假了，因为课程改革的关系，学校安排了两天的实践课程<br>男孩选择了一门在机房上的课，然后把整个机房改造成了网吧<br>几乎所有人都在打游戏<br>第二天的时候，女孩来给男孩送外卖<br>男孩直接脱下自己的校服，女孩混了进来，就这么坐在男孩身旁看着他打了一下午的游戏<br>暑假<br>快到男孩的生日了，女孩很上心的叫了一些朋友，大家在大热天吃火锅<br>钱都是女孩付的，还送了一个男孩喜欢的角色的手办<br>因为不方便带进家里，男孩把礼物转交给了G保管<br>吃完火锅，一群人进了黑网吧打游戏，女孩却和G在那儿看动画聊天<br>男孩笑笑，也不在意<br>直到几个礼拜之后，他得知G一直在约女孩一起图书馆<br>有一天中午，女孩跟男孩说图书馆没位置了去G家里了<br>男孩终于急了<br>G把女孩称作自己的女仆<br>有一天，G发了一份女仆宣言给了男孩<br>男孩没明白啥意思，G也就没多说<br>G也进了男孩的高中，男孩有事没事就找G一起吃饭<br>男孩把自己的午饭钱全花在各式各样的杂志上了，只好蹭饭卡<br>但高二第一学期快结束的时候，男孩突然迷上了翘课去网吧<br>于是几乎整个高二第二学期的晚自修，男孩都是在网吧度过的<br>整个高二，男孩都没怎么和女孩说过话，女孩倒是寄过两封信<br>男孩嫌麻烦，一直都没写回信<br>很快的，高三了<br>最开始的一个月，男孩用尽了所有心思把《冰与火之歌》给看完了<br>顺带着在家长会上被狠批了一顿<br>男孩被调到了讲台旁边，他终于开始收心<br>班主任看着他有点起色的成绩放了点心，一个月后把他给下放了<br>于是他又开始散心<br>一天，他在书店里发现了一本之前从来没见过的杂志，叫做《新知》<br>其文章晦涩难懂，不少涉及到哲学内容，让男孩沉迷其中，直到晚自修班主任站在他面前<br>班主任一把夺过这杂志，走到在班级后面的水桶旁，三下五除二的，把书撕了，教室安静极了<br>“下了课来我办公室”，班主任说<br>不出意外的，男孩又被流放了<br>不能告诉家里，图书馆又每晚八点多就关门了，那去哪里好呢<br>男孩选择了网吧<br>寒冷的冬夜里，男孩拖着中饭晚饭几乎一点都没吃的身体，在那条长达五公里多的回家路上踩着单车<br>回家的路有一段和女孩回家的路是重合的<br>一天，他在回来的路上看到了熟悉的影子<br>是她，追上她，男孩用尽全力的踩脚踏<br>奈何，他所剩不多的力气在两座桥面前无能为力<br>连叫住她的声音都发不出，生怕喊住的，不是她<br>男孩就这么又开始混着日子<br>就是在这段日子里，他发现女孩的微博更新了，转发了好多情感类的鸡汤<br>他意识到肯定有些什么事情发生了<br>他在中午的时候拦到了G<br>“你跟她发生了什么？”，他质问道<br>G隐晦的表达出了他A了上去然后打出GG的故事<br>男孩又一次哭笑不得，他最不想发生的事情发生了<br>G又告诉他，一年前发给他的女仆宣言就是说他喜欢上了女孩<br>男孩再次无言<br>G还告诉他，G也写了很多很多文字，附上了礼物放在家门口看着女孩来取走<br>男孩已经不知道能怎么表达自己的情感了<br>他回到教室，开始写信<br>信的内容只字不提她和G发生了些什么，只是写些日常<br>女孩的回信也是如此<br>仿佛他们回到了最早的时候<br>三四次通信之后，又是新学期<br>一天男孩的家里没做早饭<br>男孩选择去女孩家门口的早餐店买<br>刚给完钱接过东西，他的余光看到一辆电动车从小区驶出<br>直觉告诉男孩就是她<br>他飞奔上车，像那个冬夜里那样用尽全力去追赶<br>可惜，最终还是差那么点距离<br>男孩还是没能喊出她的名字<br>离高考就只剩几天了<br>男孩最后一次翘课去网吧，似乎是一种告别仪式<br>他没等到自己学校的放学时间离开，而是在女孩放学时候去了她的校门口等她<br>他真的等到了她，可能是有史以来第一次，他们一起回家<br>路上，他也只能嘘寒问暖提些无关紧要的话题<br>他还能提些什么呢？<br>太快了，就像高中三年的速度一样，他们分别了<br><br>—<br><br>男孩考去了遥远的C市，而女孩则是在就近的H市就读<br>暑假的最后一段时间，因为一些变故，男孩痛不欲生<br>事情解决之后，男孩家不得不安排一顿大学酒<br>男孩邀请了她，还有G是不得不邀请的<br>男孩知道会很尴尬<br>她来了，一身白裙，很漂亮<br>G自己坐在一旁，玩着手机<br>男孩酒量不行，几杯红酒下肚已经进入了半倒的状态，连同学什么时候走的都不知晓<br>那时最后一次和她见面<br>进入九月，那天就要出发前<br>男孩想起还有一些材料要复印<br>于是约了友人H载他<br>路上，H提到要不要把她再叫出来见个面<br>男孩想了想，“没时间算了吧”<br>H摇了摇头，也没再多说什么，最后他们拍了拍肩告别<br><br>—<br><br>大学刚开始的时候，男孩还会给她打电话聊天<br>几次一聊就是半小时<br>男孩发现自己还是放不下女孩<br>放不下意味着不可能开始新的感情<br>光棍节，趁着酒意，他找到女孩<br>“不要异地”，女孩明确的拒绝了他<br>他笑了笑<br>年末的时候，又因为一些变故，男孩的心理压力大到承受不了了<br>他终于再次打了女孩的电话<br>断断续续地倾诉到手机欠费<br>这是他最后一次听到她的声音<br>从此，男孩再也没联系过女孩<br>女孩也没联系过男孩<br>直到一年半后<br><br>—<br><br>大二的寒假，男孩约G一起去上海玩<br>途中，男孩提起女孩<br>“你和她怎么样了”<br>“啊，加回好友了”<br>也没聊更多<br>五月末，G突然找到男孩，问他暑假要不要一起去某站的演唱会<br>男孩算了算手头的钱，“手头有点紧，还是算了吧”，他回复说<br>暑假<br>男孩找G一起去J市修手机，归途，无意间男孩看到G的淘宝记录，两张票<br>“你和谁一起去啊”，男孩好奇的问<br>“哦，没告诉你吗，你不去我就找了她啊”，G很坦然<br>“你们和好了？什么时候”<br>“不是告诉过你了吗？她加回我好友了啊”<br>男孩心中开始充满不安<br>但他强装出一副镇定的模样<br>“你们酒店要押金你钱够吗”，男孩递出一张信用卡，“这里面还有点钱，你拿着用以后还我”<br>“记得带套”，他最后叮嘱了一句<br>原本他以为他已经放下的感情，又开始在他心中冲撞<br>他坐卧不安<br>临行前几天，他终于忍不住了，在女孩的留言板留下了两年后的第一句话<br>没想到女孩迅速找到了他，“你想说什么，赶紧说我看着的”<br>他有些慌，打了字又删掉<br>“你想说什么发出来吧，我明天还要早起先睡了”，女孩似乎很忙<br>男孩呼出一口气，扔给对方一个99+<br>却两天没收到女孩的回复<br>终于，他等到了回复<br>可那几乎是陌生人的感觉，不是他想要的回复<br>有总归比没有强吧，男孩心想<br>男孩早就反思过自己的过错，但已经是既成事实了，没有后悔药<br>行程第二天早上，他看到G很早就在线了<br>“她一回酒店就睡着了”，G这么说<br>“这酒店服务太好了还给加了床”，G还抱怨<br>男孩笑笑，再也没跟G提起过她<br>他准备好了去旅行<br><br>—<br><br>又是一个寒假，照例，G会来男孩家一趟交换点资料什么的<br>男孩旁敲侧击提起女孩<br>“啊，她，我女朋友啊”，G云淡风轻<br>男孩还是只能笑笑，转移了话题<br>他不信，他不愿相信<br><br>—<br><br>男孩又开始找女孩说话，只是只敢以留言板的形式<br>他们似乎回到了最早的时候，在对方的留言板上你一句我一句的<br>不同的是，男孩的留言板上，没有别人的留言<br>今天，男孩终于感受到了一丝异样<br>女孩和G在用同样的聊天习惯说话<br>男孩笑笑，既成事实，不想承认也是摆在那里的<br><br>—<br><br>男孩和女孩的故事，还在继续。<br><br></section>

    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a><a class="tag-link" href="/tags/Memories/">Memories</a><a class="tag-link" href="/tags/杂/">杂</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/03/about-AA/">
      关于抗锯齿
    </a>
  </h2>
  
  <time>
    Mar 11, 2018
  </time>
  <section class="content">
	  <p>今天听 Gadio News 的时候，最末尾一段提到了希望有人能来讲讲抗锯齿技术。才疏学浅，但是前几年看 MC 的文章还是知道一点相关内容，所以就来看着维基写写看，如有不正之处劳请指出。</p>
<h2 id="锯齿与抗锯齿"><a href="#锯齿与抗锯齿" class="headerlink" title="锯齿与抗锯齿"></a>锯齿与抗锯齿</h2><p>首先，什么是锯齿，以及为什么会出现锯齿。</p>
<p>我们的屏幕，是以一个个正方形的像素点组成的，而正方形的特性导致了在倾斜的线上，边缘必定会出现一个个突起的阶梯状“毛刺”，比如图上这种<img src="/images/04fb3bbbec0c10e70c660aac1efd7cf1_r.jpg" alt="preview"></p>
<p>这种阶梯状的“毛刺”就是典型的锯齿。而有了锯齿也就有了抗锯齿(Anti-Aliasing).</p>
<p>抗锯齿的一般过程就是将这个毛刺的边缘柔化，使图像边缘看起来更平滑。如图：<img src="/images/4ec755cfd484c8333f094f57b97f3408_hd.jpg" alt="img"></p>
<h2 id="各种算法简单介绍"><a href="#各种算法简单介绍" class="headerlink" title="各种算法简单介绍"></a>各种算法简单介绍</h2><p>抗锯齿算法种类非常多，下面的介绍顺序基本上是各种抗锯齿算法出现的时间顺序。</p>
<h3 id="SSAA"><a href="#SSAA" class="headerlink" title="SSAA"></a>SSAA</h3><p>超级采样抗锯齿(Super-Sampling Anti-Aliasing, 也可叫做 Supersampling 超采样)是最早也最简单粗暴的抗锯齿手法，它的原理非常简单，就是在渲染时将要输出的分辨率提升 x 倍，比如要输出 1920x1080 的分辨率到屏幕上，开启 SSAA 2x, 那么内部渲染时的分辨率就是 3840x2160, 然后 Downsampling 到 1920x1080 上，自然在许多纹理边缘上就显得平滑许多。但是这种方式太太太吃资源了，所以又开发出了新的算法。</p>
<p>在 Nvidia 发布二代 Maxwell 架构的时候，同时发布的 <a href="http://www.geforce.cn/hardware/technology/dsr/technology" target="_blank" rel="external">DSR</a> 技术中就有 SSAA 的影子，技术思路同样是以更高分辨率渲染的原始画面输出到显示器分辨率上来得到更加精细平滑的画面。</p>
<h3 id="MSAA"><a href="#MSAA" class="headerlink" title="MSAA"></a>MSAA</h3><p>SSAA 太吃资源了，我们的硬件暂时还跟不上，怎么办？于是就有了多重采样抗锯齿(Multi-Sampling Anti-Aliasing), 它跟 SSAA 的区别就是，MSAA 只对于多边形的边缘进行抗锯齿处理。比如一个红色的圆，只对圆周作抗锯齿多重采样计算，但是圆周以内的部分则不会处理。这种方式下的画面锯齿得到了一定的抑制，而抗锯齿需要的资源也大幅下降到可接受的范围中。所以 MSAA 也逐渐成为目前被使用的最多的抗锯齿技术。</p>
<p>但是 MSAA 也有其局限之处，比如对于半透明物件、边缘不明确或者非常复杂的物件比如密集草丛、铁丝网这类的抗锯齿处理就比较力不从心。</p>
<h3 id="CSAA-amp-CFAA"><a href="#CSAA-amp-CFAA" class="headerlink" title="CSAA &amp; CFAA"></a>CSAA &amp; CFAA</h3><p>历史进入 Direct 10 时代，NV 方先声夺人发布了 G80 系列，同时带来了覆盖采样抗锯齿(<a href="http://www.nvidia.com/object/coverage-sampled-aa.html" target="_blank" rel="external">Coverage-Sampling Anti-Aliasing</a>)技术，主要改进了取样类型从而使得抗锯齿效率提升，资源占用量也得到减少。举例来说，如果使用 16x MSAA，需要在周围取得 16 个采样点的色彩值和 Z 轴值，然后保存这些数值进行计算。而 16x CSAA，则全部在被采样的像素点中心取得色彩之和Z轴值，然后对比并去掉同样的数据。一般来说，16x CSAA 后只需要保存 4 份色彩值和 Z 轴值即可。换句话来说，4x MSAA 耗费的资源和 16x CSAA 是相同的，但是，16x CSAA的画面效果相比 4x MSAA 更好。</p>
<p>同期 ATI 在发布 R600 系列时也带来了可编程过滤抗锯齿(Custom Filter Anti-Aliasing)技术。简单的来说 CFAA 就是扩大取样面积的 MSAA，比方说之前的 MSAA 是严格选取物体边缘像素进行缩放的，而 CFAA 则可以通过驱动判断对影响锯齿效果较大的像素进行缩放，以较少的性能牺牲换取平滑效果。</p>
<p>但是由于种种原因，CSAA 被接受程度更高一些，不少游戏就直接加入了 CSAA 选项。而 CFAA 由于需要在显卡驱动面板中进行调试而渐渐被用户所遗忘。</p>
<h3 id="MLAA-amp-FXAA"><a href="#MLAA-amp-FXAA" class="headerlink" title="MLAA &amp; FXAA"></a>MLAA &amp; FXAA</h3><p>在 CFAA 被遗忘之后，AMD-ATI 带来了形态抗锯齿(Morphological Anti-Aliasing).</p>
<p>不同于上面几种需要对多边形边缘进行分析计算的算法，MLAA 是一种后处理技术，发生在整个 3D 计算完成即将输出画面到屏幕上前，打个比方就是你拍完照用 Photoshop 处理的过程。</p>
<p>MLAA 的实际效果还是非常不错的，但是资源耗用还是有点厉害的。它的最大优势就是不需要游戏来支持它，因为是后处理技术所以在显卡驱动面板中打开就能用而且兼容性非常好。但是由于其仅仅使用颜色数据来判断抗锯齿边缘，因此 MLAA 的应用可能导致无法辨识到底哪些边缘需要进行抗锯齿计算。特别是一些不需要抗锯齿的地方，如文字，表格等，可能都由于不当抗锯齿而显得圆滑甚至怪异。</p>
<p>这边 A 家出了新抗锯齿技术，老冤家 NV 当然也不甘落后，在 Fermi 上推出了快速近似抗锯齿(Fast Approximate Anti-Aliasing)。</p>
<p>FXAA 和 MLAA 一样，也是一种后处理抗锯齿，两种 AA 在原理上相似，但是由于 FXAA 可以在 AN 两家的卡上都可以用而 MLAA 则由于部分计算处理依赖于硬件所以只能在 A 卡上用，最后导致 FXAA 被广泛的采用了。而且同时期 FXAA 的性能损失比 MLAA 更小，而效果上基本能接近 4x MSAA 的画面，虽然同样还是会出现“字体破坏”的情况。</p>
<h3 id="TXAA"><a href="#TXAA" class="headerlink" title="TXAA"></a>TXAA</h3><p>在抗锯齿这条路上，众多程序员以及各种“家”的探索是不会停下来的。在 Kepler 架构发布的同时，NV 也带来了新的 <a href="http://www.geforce.cn/hardware/technology/txaa/technology" target="_blank" rel="external">TXAA</a>(Temporal Anti-Aliasing 可称为“时间性抗锯齿”)技术，据 NV 自家的介绍，这项技术集时间性过滤器、硬件抗锯齿以及定制的 CG 电影式抗锯齿解算法于一身。</p>
<p>原有的抗锯齿技术在解决静态画面的锯齿上可以说已经达到了瓶颈了，但是在动态画面上，有锯齿的部位很容易出现闪烁。如同其名字中的“时间性”，TXAA 旨在解决“时间性抗锯齿”，也就是动态画面中的锯齿闪烁等问题。而其同时提供着不输于 8x MSAA 的静态画面抗锯齿效果。</p>
<p>TXAA 可以说是目前被采用的较多的抗锯齿算法中最厉害的一种了，但是它一是需要硬件电路配合，二是吃资源，以性能换画面，所以也基本上是中高端 N 卡用户用的。</p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>目前主流的一些抗锯齿技术大概就是这么多了，本文很多内容都是参考中文互联网上的一些文章写成的。第一次在机核发文，存在的许多不足之处也请多多包涵。</p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a><a class="tag-link" href="/tags/Game/">Game</a><a class="tag-link" href="/tags/Hardware/">Hardware</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/02/install-an-archlinux/">
      Arch Linux 小折腾记
    </a>
  </h2>
  
  <time>
    Feb 13, 2018
  </time>
  <section class="content">
	  <p>久闻 Arch Linux (下文简称 Arch )大名，在虚拟机上多次完成过了整个系统的安装与图形界面的配置，也试过了 KDE 和 GNOME 这两个大名鼎鼎的图形环境，深切体会到了 Arch Linux 的四大原则：</p>
<ul>
<li>Simplicity</li>
<li>Modernity</li>
<li>Pragmatism</li>
<li>User Centrality</li>
</ul>
<p><del>Pacman 是最好的包管理器</del></p>
<hr>
<p>我分别在自己的台机上和一台 ThinkPad S1 Yoga 2014 上安装 Arch. 具体过程跟着官方 <a href="https://wiki.archlinux.org/index.php/Installation_guide" target="_blank" rel="external">Installation Guide</a> 走就行了，Wiki 中的注意事项也是比较全面了，本文写几个小注意点。</p>
<h2 id="Btrfs"><a href="#Btrfs" class="headerlink" title="Btrfs"></a>Btrfs</h2><p>不知道 Btrfs 的我建议你马上查 Wikipedia.</p>
<p>Arch 的安装 ISO 环境中是自带了 Btrfs 的工具包和支持的，但是在 base 软件包中不包含这些，所以你需要手动安装 <code>btrfs-progs</code> 这个包，然后在 /etc/mkinitcpio.conf (注意是在 <code>arch-chroot</code> 这一步之后)中的 HOOK 一行中添加 btrfs, 之后跑一遍 <code>mkinitcpio -p linux</code>, 看到输出中有 btrfs 即可。</p>
<p>关于 btrfs 的配置问题，参见官方 Wiki, 也可以参考 <a href="https://github.com/egara/arch-btrfs-installation" target="_blank" rel="external">egara/arch-btrfs-installation</a>.</p>
<h2 id="Boot-Loader"><a href="#Boot-Loader" class="headerlink" title="Boot Loader"></a>Boot Loader</h2><p>在 Boot Loader 的选择中，我个人还是比较倾向于直接使用 systemd 集成的 systemd-boot, 懒得再装个 GRUB.</p>
<p>虽然 systemd-boot 局限性非常大，比如它只能加载 EFI 可执行文件比如 bootmgfw.efi, vmlinuz-linux.</p>
<p>如果选择了 systemd-boot 作为 Boot Loader, 那么就需要在 <code>arch-chroot</code> 后手动运行一次 <code>bootctl --path=$ESP install</code> 来把引导程序安装进 EFI 分区中并向 UEFI 界面注册这个引导器，之后你在启动时按 F12 就可以看到一个 Linux Boot Loader.</p>
<p>但是如果只是将 Boot Loader 安装到了 EFI 分区还不足以让它引导我们进 Arch, 仍然需要在 /boot/loader/entries/ 这个目录下建立新的 conf 文件，里面的内容如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">title Arch Linux</div><div class="line">linux /vmlinuz-linux</div><div class="line">initrd /initramfs-linux.img</div><div class="line">options root=(PARTUUID|PARTLABEL)=xxxxxxxxxxxxxxxxxxxxxxxx rw</div></pre></td></tr></table></figure>
<p>如果使用的是 Intel 的 CPU 并且有安装 <code>intel-ucode</code> 包，那么在第3行之前再加一行 <code>initrd /intel-ucode.img</code> 启用它。</p>
<p>建立完了引导所需的系统 config, 需要在 /boot/loader/loader.conf 中的 default 一行中指定刚才建立的 config 文件名，然后使用 Linux Boot Loader 引导器就会默认进入 Arch Linux.</p>
<h2 id="双系统与时钟"><a href="#双系统与时钟" class="headerlink" title="双系统与时钟"></a>双系统与时钟</h2><p>感谢 UEFI 标准，现在我们可以非常方便地组建双系统 (Windows + Linux) 环境。</p>
<p>如果使用的 Boot Loader 是 systemd-boot, 那么它会自动检测 Windows 的存在，并且在选择菜单自动提供一个 Windows 的选项，这个选项的配置名为 <code>auto-windows</code>, 选择它会运行 /boot/Microsoft/Boot/bootmgfw.efi 然后就是 Windows 的流程了。</p>
<p>双系统有一个很大的问题，就是时钟。Windows 默认往 BIOS 写入本地时间，而不是 Linux 标准的 UTC, 这就会导致你从 Windows 切换过去后时间会+8, 也就是按你的时区调整然后又写回到 BIOS 中。从 Linux 切换过去，Windows 认为是本地时间，于是显示给你的实际上是 UTC. 所以为了解决这个问题，在安装 Arch 时，使用 <code>hwclock --hctosys -l</code> (将硬件时间作为本地时间读入系统), 而不是 Guide 上所用的 <code>hwclock --systohc</code>(将系统时间写入 BIOS 并且是 UTC).</p>
<p>之后启动到 Windows, 注册表定位到 <code>HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation</code> 添加一个 DWORD, 名为 <code>RealTimeIsUniversal</code> 值为 1, 即可实现 Windows 往硬件中写入的时间是以 UTC 为标准而不是本地时间。</p>
<h2 id="systemctl-enable"><a href="#systemctl-enable" class="headerlink" title="systemctl enable"></a>systemctl enable</h2><p>由于 Arch Linux 的哲学，大部分软件包在安装之后也并不会自动启用，需要你手动 <code>systemctl enable|start xxxx</code>. 尤其要留意的是，还在 ISO 环境下安装系统的时候就要把 dhcpcd 这个服务给 enable 了，解决你进系统之后发现连不上网络想半天不知道问题出在哪里的问题。当然这是针对有线网卡，而大部分无线网卡，我推荐直接使用 Network Manager 搞定。当然使用无线网卡的首次联网你还是需要如下步骤：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ip link set dev interface up</div><div class="line">iw interface scan</div><div class="line">wpa_supplicant -B -i interface -c &lt;(wpa_passphrase SSID Password)</div></pre></td></tr></table></figure>
<p>还有一点需要注意的是，Arch 的 Shadowsocks-libev 默认读取的配置目录在 /etc/shadowsocks/, 与 Python 版相同的目录而不是传统的 /etc/shadowsocks-libev/ 下，启用它的命令为 <code>systemctl enable shadowsocks-libev@配置文件名.service</code> .</p>
<h2 id="Intel-有线网卡的坑"><a href="#Intel-有线网卡的坑" class="headerlink" title="Intel 有线网卡的坑"></a>Intel 有线网卡的坑</h2><p>当你机器上使用的网卡的是 Intel Ethernet Connection I21x 的时候，你要小心了，在安装 Arch 之前，在 Windows 中安装 Intel 的官方驱动，然后在网卡的硬件配置面板中将所有的网络唤醒选项给关闭，这可以有效防止你进入 Arch 环境之后获取不到任何的网络信息导致连不上网。</p>
<p><code>&gt;&gt; endl;</code></p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/02/old-friends/">
      故人
    </a>
  </h2>
  
  <time>
    Feb 13, 2018
  </time>
  <section class="content">
	  <p>故人，泛指以前认识的人。</p>
<p>你活了二十年了，认识过了多少人呢？</p>
<p>从亲戚到学校再到社会，故人所指代的人越来越多。曾经那些与你关系不错的“朋友”们，不联系了也就进故人堆中了，你的故人堆越来越高。</p>
<p>没办法的人总在变化的你不可能一辈子只认识这么点人不跟更多的人打交道。但是每当由以前的“朋友”进入故人堆中，你感到过自己情绪的变化吗？惋惜，痛心？亦或是经历的多了根本就无动于衷？</p>
<hr>
<p>这个小县城，是全中国千千万万个县城中普通的一个，坐落于传统的富庶之地。千百年来，此地的士绅文化根深蒂固，不像是更南方的人们更喜欢经商。在外读书的学子们，学成之后也更偏向于归家，而不是留在求学之地。</p>
<p>这个小县城，只要你的故人多，那你上街随便走两步都能碰到他们，就连坐在这小小图书馆的一个自习室里，你一眼扫去，都能找到好几个疑似你认识的人。</p>
<hr>
<p>中国是个“人情社会”。</p>
<p>人情，在我的定义中，就是“我帮了你一个忙，你就欠了我一份情”中的“情”，用劳动报酬来解释或许更好一些。</p>
<p>人情社会，就是以人情编织成的网络为基础的社会。举个例子，你爹喝酒上头了，跟你说，儿子，你想不想回来工作，爹帮你去跟局长说一说。</p>
<p>这个“说一说”中，又包含了多少背后的含义呢？</p>
<p>我讨厌人情。</p>
<hr>
<p>故人来找你帮忙。</p>
<p>你正好闲着没事干，帮了。</p>
<p>故人一句谢谢，结束了这几年中你们为数不多可能是仅有的交流，你甚至找不到一句你们能聊的共同话题。</p>
<hr>
<p>你还能指望更多的报酬吗？你的时间成本就值那么两个字了？</p>
<p>当然不是，这份我最厌恶的人情，就是委托方亏欠的你仅有的报酬，虚无而飘渺。</p>
<hr>
<p>小县城是一个小型的人情社会。走两步都能碰到故人的情况下，你被迫地，要去帮故人的忙。</p>
<p>你不帮，是你不念旧情太过高冷不会做人。你帮了，又是白费自己时间获得一句空头的“谢谢”。</p>
<p>这只是整个中国这个大型人情社会的一个小缩影，有人的地方，总会有人情。</p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a><a class="tag-link" href="/tags/Memories/">Memories</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/02/what-iboot-source-code-contains/">
      泄露的 iBoot 源代码中都有些什么
    </a>
  </h2>
  
  <time>
    Feb 9, 2018
  </time>
  <section class="content">
	  <p>近日，一份疑似 iOS 9.3.x 的 iBoot 及其他部分 BootLoader 的源代码被匿名人士 push 上了 Github, 粗略地查看了一下里面的文件之后，大家都惊讶地发现这份源代码的爆点实在是太多了。</p>
<p>项目的 README 中是这么写的：iBoot_BootROM_iBSS_iBSS_iLLB_Source_Code</p>
<p>其中 iBSS 是 <strong>iB</strong>oot <strong>S</strong>ingle <strong>S</strong>tage 的缩写，而 LLB 是 <strong>L</strong>ow <strong>L</strong>evel <strong>B</strong>ootloader 的缩写。</p>
<p>我们先来看一下 iOS Devices 的启动流程：</p>
<p>在 Apple 定制的一系列 A 系列 SoC 中有一块存储区域专门存放了一部分最初的启动代码，也就是俗称的 BootROM, 这部分被 Apple 称之为 SecureROM, 它是在电源键被按下，设备上电之后最初加载的代码。SecureROM 检查下一级 BootLoader, 也就是 LLB, 如果签名没有问题，那么就加载并初始化 LLB, 此时设备的 Apple Logo 就出现了。然后 LLB 检查并初始化 iBoot, 同样是通过 Apple Root CA Public 证书验证签名，通过就会把设备带给 iBoot, 而 iBoot 会映射 Device Tree, 然后验证内核签名并加载，最终初始化内核并运行，这时候可以说 iOS 系统已经启动了。</p>
<p>通过简述的启动流程，我们可以看到，BootROM, LLB, iBoot 这三个无论哪一个都是在整个启动流程中充当关键角色的。所以这次源代码的泄露，非常劲爆。</p>
<p>在基于证书链的安全体系下，私钥的泄露可以说是直接把安全性掉到0去了，而这份代码中，在位于 /lib/pki 和其中的 tests 目录下，可以看到有一份 Fake CA 和一些私钥，还有一份中间证书和私钥，如果后续版本也是沿用这些东西的话，整个启动验证链的加密体系，就真的可以说安全性为0了。</p>
<p>因为这份代码是 9.3 时代的，也就是在 iPhone 7 那代发布前的版本，所以我们能看到有许多 T8010 相关的文件（T8010 是 Apple 对于 A10 芯片平台的代号）。而有趣的是，在 /target 目录下出现了 iphone8 这个文件夹，难不成 Apple 内部在 2016 年就开始对 iPhone 8 进行内部测试了？但是点进去看，目录下的文件清晰的指向了另一款产品——iPhone 6s. 往上推，iPhone 7 文件夹对应着 iPhone 6, iPhone 6 文件夹对应着 iPhone 5s, 如果按照这个内部排序，iPhone Ⅹ 这个 Ⅹ的由来，可能更好解释一点。而 iPhone 8, 则更像后来上马的 iPhone 7 Reversion.</p>
<p>除了主引导程序的代码外，泄露的代码中还包含了许多驱动，在 /drivers 目录下，可以清晰地认出 iOS 平台所使用的一些硬件，其中甚至包括了 Thunderbolt 驱动。</p>
<p>内容还有很多，笔者水平有限，也解读不出更多的东西了。</p>
<p><code>&gt;&gt; endl;</code></p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a><a class="tag-link" href="/tags/杂/">杂</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/02/mourn-for-acfun/">
      悼念 AcFun
    </a>
  </h2>
  
  <time>
    Feb 2, 2018
  </time>
  <section class="content">
	  <p>2018年2月2日，AC 又又又倒闭了。</p>
<p>前两天深夜刷微博时，碰巧瞥见一条“新闻”，上书「AcFun 团队缺乏资金，欠薪几个月，已经无力维持网站运营，关站在即。」第不知道多少次看到 AC 要关站新闻的我，也不以为意，不过就是第不知道多少次关站而已，我也早就不是 A 站用户了，对这个网站没什么怀念或者留恋的东西。</p>
<p>然后今天早上醒过来，一刷微博，铺天盖地的，又是一堆“AC 亡了”的消息。有打趣的有悼念的有分析的有写背后故事的，甚至还有缺德的。娱乐至死的年代中，这个消息也只能成为一些人的热点，一些人的谈资，一些人的一条悼念微博，而更多的人，则是好奇：“AcFun 是啥？”</p>
<p>A 站走到今天这个地步，绝非偶然。</p>
<h2 id="一次又一次，他们错过了"><a href="#一次又一次，他们错过了" class="headerlink" title="一次又一次，他们错过了"></a>一次又一次，他们错过了</h2><p>从 2012 年说起。</p>
<p>2012年，是我接触更宽广的互联网的第一年。也是在那年，AcFun 举办了第一届宅学会。当时刚刚了解到 A 站是啥的我，在 A 站看了直播——后来的 A 站直播区，叫做“斗鱼”，斗鱼的早期用户中不少都是以 AcFun 账号注册登录的，包括我——然而这样的宅学会，是第一次，也是最后一次像样的，第二届的宅学会就已经朝着“主题漫展”的错误方向去了，而且影响力远没有第一次那么大。第一届的宅学会上，A 站请到了著名配音演员葛平，还有GoHank、性感玉米、林熊猫这三位来主持。</p>
<blockquote>
<p>而这时候的 B 站，已经开始逐步用力发展他们的移动客户端业务了。早期的 AB 两站移动客户端体验，B 站的 App 无论在界面设计还是播放体验上，都是比 A 站的要高出一条街的存在。</p>
<p>本文主旨不在于两站对比，故以引用形式略提一句同时期的 B 站发展概况。</p>
</blockquote>
<p>搞笑的是，在第一届宅学会过去恰好一年之际，GoHank, 这个对 A 站贡献不少的 UP 后来进入管理层的“猴子”出走了 B 站。当时 A 站不少运营以及用户的理念，在这个帖子中，能够瞥见一番。<a href="http://last-dreamer.com/thread-2501-1-1.html" target="_blank" rel="external">狗Hank+葛平+ACFUN事件</a></p>
<blockquote>
<p>那hank确实不适合这里了，因为我觉得ac就像是猴王的微博的简介<br>“只交朋友，不混圈”<br>走好不送。</p>
<p>还是那句话，<br>只交朋友，不混圈，混圈的话，隔壁欢迎你。当然这里也欢迎你，不过&gt;这里欢迎的是朋友，不是圈子。<br>谢谢。</p>
</blockquote>
<p>然后就是赛门出走这一重大事件。</p>
<p>2014年4月末，时任“站长”的赛门和投资者闹翻，离开 A 站。</p>
<p>一句话足矣，想要了解详情的，我建议通过知乎查询。</p>
<p>赛门走后，AcFun 的管理层可能是失去了一个大的方向，也可能是陷入了融资后高层权力斗争的漩涡中，网站运营没有起色。</p>
<p>2015年3月，因为版权问题，AcFun 三名高层被刑拘，其中包括业余创作“空之文库”的尼窝猴。而事件解决期间不断有前猴子出走，原来的武汉团队几乎没剩几个老员工。</p>
<blockquote>
<p>当时的空之文库在轻小说阅读的体验上可以说是秒天秒地秒空气</p>
</blockquote>
<p>2016年2月，匿名版之争，光驱猴投奔 B 站。</p>
<p>……</p>
<p>之后的事情，仿佛 AcFun 已经被大家都淡忘了，不时的传出点消息跟世人说：“我还活着”。</p>
<p>它曾经拥有过很多次机会来扩大自身，但却因为各种各样的变故，都错过了，也许是他们缺少一个如陈睿般的有经验的运营决策者，也许是他们根本不想扩大，小众一点也没什么不好。而从 A 站早中期脱离出来的 MikuFans, 已经成了中国“二次元文化的代表”，甚至已经在准备上市了。</p>
<p>也许，再过几年，大家都会想起，曾经有个网站叫做 AcFun, 是它最早在大陆开始传播隔壁邻居的一些亚文化，是它最早推动了国内的二次创作，是它培养了国内一代亚文化人才。</p>
<p>也许，它会撑过这次危机，如官博所说的那样，“我想再活五百年！ ”。就算小众，但也能给众多喜欢 A 站的“漫友”们提供一个温暖的家，就像它一直以来挂着的那句“天下漫友是一家”那样。</p>
<h2 id="再见，AcFun"><a href="#再见，AcFun" class="headerlink" title="再见，AcFun"></a>再见，AcFun</h2><p>但愿这一次，A 站别再活过来了。</p>
<p>就让 AcFun 这个名词进入中国互联网的历史故土堆里，安心地为后来者提供它那一份“历史经验教训”和代表着老一代日本亚文化推广者和受众们的，美好回忆吧。</p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a><a class="tag-link" href="/tags/杂/">杂</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/01/doityourself-0/">
      折腾记-0
    </a>
  </h2>
  
  <time>
    Jan 30, 2018
  </time>
  <section class="content">
	  <p>为了把 RaidFinder 给实现出来，我决定直接自己手动实现一个 Filtered Stream API 的调用，来检查到底是需要什么 Track 关键词才能达到目的。</p>
<blockquote>
<p> 这里真的要吐槽一下新的 Twitter Developer 页面，以前大量的 API Reference 页面都已经404了，包括一些非常重要有用的 API  文档都能 404, 再看看那个“切换到夜间模式再切换回来之后主题色丢失”的前端 bug 修了几个月才修完，可以说 Twitter 真的药丸。</p>
</blockquote>
<h2 id="构造-OAuth-验证"><a href="#构造-OAuth-验证" class="headerlink" title="构造 OAuth 验证"></a>构造 OAuth 验证</h2><p>查阅了文档得知，Stream API 需要进行在请求的 HTTP Header 中包含完整的用户验证，也就是走完整的 OAuth 验证流程，由于手上已经拥有了完整的用户和应用的 Key : Secret 对，所以直接进行构造。</p>
<p>一个完整的验证字段中必须包括如下内容：</p>
<ol>
<li><p>Consumer Key</p>
</li>
<li><p>Nonce</p>
</li>
<li><p>Signature</p>
</li>
<li><p>Signature Method</p>
<p>Twitter 只支持 HAMC-SHA1 的签名方法</p>
</li>
<li><p>Timestamp</p>
</li>
<li><p>Access Token</p>
</li>
<li><p>OAuth Version</p>
</li>
</ol>
<p>而 Signature 字段又是根据其他6个字段以及 HTTP 请求的 URL 和参数（包括 POST 方法的 Request Body）来产生的，格式如下：</p>
<p><code>请求方法&amp;请求URL&amp;其他6个字段&amp;请求参数</code></p>
<p>HMAC-SHA1 签名的产生还需要一个 Key, 这个 Key 是由用户的 Consumer Secret 和 Access Token Secret 来构建的。</p>
<h2 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h2><p>写了半个下午的 OAuth, 写完运行之后还是返回一个 401 给我，仔细检查代码也没有发现哪里出错了。没有办法之下，我想到了抓原版的请求包来看它到底用了什么关键词。于是立即安装 <a href="http://www.scala-sbt.org/index.html" target="_blank" rel="external">sbt</a> 和 JDK. 其实 Windows 上的 sbt 也就是提供一个 jar 包和 sbt.bat 这个运行脚本来设定 sbt 所需要的运行环境而已。</p>
<p>安装完了，<code>sbt run</code> 先跑一记看看，然后让我没想到的是，在性能比 VPS 强了几倍的情况下，这玩意儿还是跑的稀慢，也可能是 Windows 的问题，总之，构建初始运行环境就花了大概一个半小时，不容易等到开始编译 scala 资源了，开始疯狂报错了。</p>
<p>首先是一个 Python 脚本报错导致后续脚本无法继续，查询项目文档后得知 Windows 上需要 Python 2.X, 而我安装的是 3.6, 没想到在这里会第一次碰到 Python 的版本问题，没办法，下 2.7 改 Path, 好通过了，然后继续报错。</p>
<p>之后报错都是因为 Java 运行环境的限制，主要问题出在内存的设定上，Google 之，然后在 Java 控制面板中添加全局参数，<code>sbt run</code> 之后开任务管理器看到参数起效了，遂继续运行下去，然而还是会报内存不够的错误，不解，好在每次都能按部就班的往下跑一点，几次重启之后也搞定了。把 twitter4j.properties 放到根目录下，<code>sbt run</code> 之后发现貌似请求没走代理，Twitter 请求撞墙超时。这时想到用 Proxifier 将 java.exe 的请求重定向到本地代理去，重定向之后就跑起来了，程序启动的一瞬间有两个 Search API 的请求和一个 Stream API 的请求，然后全是访问 pic.twitter.com 的请求，下图片的。</p>
<p>既然 Proxifier 能够重定向流量，那么我把 java.exe 的请求重定向到 Fiddler 的端口去不就能看到包内容了。但是切过去却发现，所有请求都不通了。期初以为是 Fiddler 没走代理，根据别人的经验添加了转发规则之后仍然出错，百思不得其解中，突然看到程序的出错信息不再是访问 Twitter 超时了，而是 SSL 证书出错。</p>
<p>怎么会呢？我明明把 Fiddler 的证书添加到系统中去了。Google 之，发现 Windows 上的 JRE 自己实现了一套证书环境，我去你大爷的垃圾 Oracle, 放着系统自己的轮子不用非要用自己那套垃圾轮子给人麻烦，前面的网络请求也是自己造的轮子直接跳过系统代理。</p>
<p>没办法，寄人篱下。于是 Google 到添加 SSL 证书的办法，添加完之后发现还需要自定义的命令行让 JRE 读证书，同样使用 Java 控制面板添加参数，然而这次发现参数并没有起效。</p>
<blockquote>
<p>切记 keytool 这玩意儿要用管理员身份来跑，添加完之后 keytool 会生成一个 keystore 文件，建议将它移动在自己 Home 文件夹中并重命名为 .keystore</p>
</blockquote>
<p>既然 \$JAVA_OPTS 这个环境变量看上去对 sbt 没用，那我改 $SBT_OPTS, 利用 Everything 这玩意儿强大的搜索功能找到了存在于 <code>sbt 安装目录\config</code> 下面的 sbtopts 文件，好就是你了，添加自定义命令行，<code>sbt run</code>, 然并卵，一点作用都没起。一头雾水中我打开 sbt.bat 这个 Windows 版 sbt 的实际起效文件，发现了这行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">set FN=%SBT_HOME%\..\conf\sbtconfig.txt</div></pre></td></tr></table></figure>
<p><del>我去你妈的，也是个不喜欢用一套轮子的。</del></p>
<p>把原本写进 sbtopts 文件的自定义命令行改写到 sbtconfig.txt 中，Java 命令行的前缀 <code>-J</code> 并不用添加，最后如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-DproxySet=true </div><div class="line">-DproxyHost=127.0.0.1</div><div class="line">-DproxyPort=8888   &apos;Fiddler 的代理端口</div><div class="line">-Djavax.net.ssl.trustStore=&lt;path\to\FiddlerKeystore&gt; &apos;刚刚生成的 keystore 文件的位置，如果移动到了 $Home 下面并重命名为 .keystore 的话这行就不用加</div><div class="line">-Djavax.net.ssl.trustStorePassword=&lt;Keystore Password&gt; &apos;刚刚 keytool 让你敲的密码</div></pre></td></tr></table></figure>
<p><code>sbt run</code></p>
<p>终于，我在 Fiddler 中看到了 java.exe 的请求，并且正确地解密了出来。我花了半天时间探寻的内容终于呈现在我眼前：</p>
<p><code>count=0&amp;track=%E5%8F%82%E5%8A%A0%E8%80%85%E5%8B%9F%E9%9B%86%EF%BC%81%2C%3A%E5%8F%82%E6%88%A6ID%2CI%20need%20backup%21%2C%3ABattle%20ID&amp;stall_warnings=true</code></p>
<p>URL Decode 之后就是：</p>
<p><code>count=0&amp;track=参加者募集！,:参戦ID,I need backup!,:Battle ID&amp;stall_warnings=true</code></p>
<p>我看到这个之后差点吐血，原来他妈就是简单的用<code>,</code> 这玩意儿来分隔开 Track 关键词就能实现日语推的实时 filter???</p>
<p>还要继续实验。</p>
<h2 id="外网访问"><a href="#外网访问" class="headerlink" title="外网访问"></a>外网访问</h2><p>前文有讲，家里网络“重做”之后我就把主路由的 DMZ 主机挂在二级路由上，二级路由的 DMZ 挂在自己机器上，这样外网的请求就直接能到自己机器上。</p>
<p>然而从外部使用 DDNS 域名+端口号的方式不能直接访问到 RaidFinder. 哦好像是要配上一个 HTTP Server, 那简单，跑一个 http.server 80 不就行了。</p>
<p>是行了，能访问到所有的静态资源，但是看着 Console 中不断提示的 <code>ws/raids?keepAlive=true</code> 404, 我突然想起来前不久看到的 WebSockets 简介中提到的，要建立一个 WebSockets 连接是需要从 HTTP 请求“转发升级”过去的。于是想到用 NGINX, 下载，这玩意儿才 1MB+ 的大小，真他妈绿色环保。</p>
<p>把自己服务器上的 nginx.conf 拖出来抄配置，终于理解了之前搜到的配置的用处：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">proxy_pass http://127.0.0.1:$port;</div><div class="line">proxy_http_version 1.1;</div><div class="line">proxy_set_header Upgrade $http_upgrade;</div><div class="line">proxy_set_header Connection "upgrade";</div></pre></td></tr></table></figure>
<p>配置中最后两句就是为 WebSockets 而服务的，是一个 HTTP 请求转为 WebSockets 连接的关键点。</p>
<p>那么一切设定好，开始跑，问题又来了：外网无法访问，内网 80 转发正常。</p>
<h2 id="gt-gt-endl"><a href="#gt-gt-endl" class="headerlink" title="&gt;&gt; endl;"></a>&gt;&gt; endl;</h2><p>最后这篇折腾记的终点就在这里了，不知道为何，访问就是无限转圈，但是起初寻找关键词的目的还是完成了。</p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a><a class="tag-link" href="/tags/Programming/">Programming</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/01/router/">
      家庭网络和路由
    </a>
  </h2>
  
  <time>
    Jan 21, 2018
  </time>
  <section class="content">
	  <p>在<a href="https://blog.xinoassassin.com/2018/01/holiday-0/" target="_blank" rel="external">上一篇文章</a>中，我提到回家要干的一件事情就是更换路由。把新买的二手<del> Nepgear</del> Netgear R6250 替换掉用了两年多的洋垃圾 RT-N16. 更换到现在已经过去一天半左右的时间了，遇到了几个问题。</p>
<p><img src="/images/HomeNetwork.png" alt="HomeNetwork"></p>
<p>拿快递开箱换上配置好一共花了不到半小时就搞定了，然后问题开始浮现：我的 ThinkPad S1 Yoga 连接不到 R6250 提供的 2.4G 无线网络。开始认为是笔记本上那块单频 Intel 7260 的锅，然后把 R6250 的 2.4G 网的频宽从 40MHz 降到了 20MHz, 结果仍然有时断时续的情况出现，认为还是 7260 这张网卡的问题，准备更换网卡。但北美良心想在 BIOS 中做了限制，更换起来很麻烦，所以一筹莫展。结果今晚日常拿起手柄 V 的时候突发奇想连一下无线，发现根本找不到 2.4G 网的 SSID, 就算不容易刷出来了也是连接不上的状态，遂开始感觉是 R6250 的问题。Google 之，发现使用第三方固件的 R6250 大多都存在这种问题，比如 2.4G 网不稳定，2.4G 根本连不上什么的。但是我又不想用回官方那个烂的很的固件，于是掏出从学校快递回家，原本准备用来替换掉配电箱中的主路由的那只被改装过的 TP-Link WR720N, 本就刷好了 LEDE, 稍微改了几个配置就当 2.4G 的 AP 来用了，连接非常稳定。</p>
<p>把 DMZ 主机指定到自己的机器之后，直接通过 DDNS 域名进行内网访问，速度非常快，延迟非常低，爽。</p>
<p>然后用着用着，无心看到 IPv6 的地址头不对，而且怎么本地 DNS 域也变成了 LEDE 了？一看果然是小的 AP 在作怪，上面的 DHCP 服务器没关，也就是一个网段中有两个设备在 DHCP 广播。遂关闭之，顺带着把 Lan 口设置中的网关确定为 2.1, 并把 Dnsmasq 的服务一起关了，问题消失。</p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/01/holiday-0/">
      假期——于飞机上
    </a>
  </h2>
  
  <time>
    Jan 18, 2018
  </time>
  <section class="content">
	  <p>在成都磨蹭掉一个礼拜之后，我终于飞回家准备开始假期了。本来以为这寒假够短的，正月十五不到就要返校上课结果今天出发前一看国航 App, 离回程航班还有三十六天，还是有点吃惊的。</p>
<p>虽然 Bitcoin 带着众多币种在昨天一起跳了一次崖，但在短时间内显卡的价格还是下不来的，不过本就打算在过一段时间直接买一块 GV10x 算了，那么估计是要继续用 940M 凑合着了。也就是说还是打不成去年前年发售的那些最新最炫酷的大型游戏，还是打打 R6, 农农 GBF 好了。</p>
<p>前几天从微博上收了一台网件 R6250, 与两年半前收那台 RT-N16 一样的价格，但是性能强了太多。同样的五口全千兆<del>最在意的点</del>，802.11AC 和 5GHz 的支持，可以用多种开源系统<del>网件的原厂固件一直被人喷是屎</del>。从 11 号晚上搬到中舒那边之后才发现，在嘈杂的 2.4 GHz 环境下，无线网络延迟的增加可以很明显的感知到。当年 RT-N16 发布时，802.11N 也还只是草案阶段，仅支持 150Mbps 的传输速率<del>实际上是支持到 300Mbps 的但不知道怎么回事，我用的时候实际连接速率最高都是144Mbps</del>，在今天确实远远不能满足我的需求了。不过一台 2010 年发布的路由器，能用到现在而且华硕时不时还会给它出个固件更新可以说是非常良心了，退役给家里当主路由用吧。</p>
<p>前不久国家出台快速推进 IPv6 普及的政策，据说东部部分地区的电信已经支持了 IPv6 的接入（事实上在两年半前 RT-N16 刚到手的时候就试过，貌似确实有）, 那么换了主路由干脆把 IPv6 也配置好，跟上潮流嘛。</p>
<p>那么回家干的事情第一点就是搞网络，你说我一个非网络运维专业出身的天天跟各种网络节点设备打交道也是。。。</p>
<p>也是挺奇怪的，自从打完空の軌跡 FC 之后把 SC 开了一个头就一直不想打下去，本来打算飞机上把序章完成掉的结果也变成了码字而不是拿着手柄 V, <del>不过 A330 确实比较稳的，果然还是宽体飞机好。</del>寒假看看有没有心情打吧，毕竟机器和卡带都是别人的自己一直拿着也不太好，SC 完了还有 3rd 也是头疼了<del>说到底还是传统 JRPG 的错。</del></p>
<p>过完年就要回去读大三后半学期了，离成为一个社畜就只剩半年不到的事件了。考研是不会去考的，这辈子的不会去的。从去年夏天开始投的简历都已经石沉大海了，那我也没好的办法，只能继续学习。连一个不给钱只管饭的银行打杂的实习机会都不考虑我 <del>虽然我感觉是因为时间问题</del> 那我还是只能考虑考虑当前端/后端/全栈了，当务之急还是多学点东西，如果寒假能克服障碍把那个 RaidFinder 写完，之前文章中给定的三个目标给实现，那我觉得我的全栈起码是，入门级了吧。</p>
<p>还一个小时降落，看了眼字数已经水了将近一千字了，但一点收尾的感觉都没有，那就，继续水下去好了。</p>
<p>今年年内 Granblue Fantasy Re-Link 可能就会发布，但是目前为止购买 PS4 Pro 的钱是一点都没有，白条和信用卡还欠着一堆，只能靠四月头上的保险钱看看能不能减轻一点压力，氪金还是少氪一点吧。</p>
<p>哦对，还有跟她说的可能有的生日礼物。这个“可能”应该是“肯定”才对，计划是在一个杯子里放条生日石项链。转眼间就是三年，只能感叹一句，物是人非，当初自己铸下的错误，可能这辈子，都没有办法再挽回了。</p>
<p>突然发现，一写到她，我就写不下去了，马上就要收电子设备了，再扯点别的。</p>
<p>今年的旅游计划大概是去趟武汉和重庆吧，去年夏天感受过了粤国和鹭岛，今年感受下在中部但文化上偏西南地区的都市和离成都最近的大都市的另一种感受，有机会的话还会去趟苏州感受苏南三市的发展。</p>
<p>也就这样了吧，保存睡眠了。</p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a>
	  </div>
    

  </section>
</article>
  
    <article class="post ">

  
  <h2 class="title">
    <a href="/2018/01/rf-developing-0/">
      RaidFinder 开发记——1
    </a>
  </h2>
  
  <time>
    Jan 13, 2018
  </time>
  <section class="content">
	  <p>上篇文章给自己写了一个开发计划，这两天已经开始动手了，结果刚开头就非常不顺，来写篇文章吐槽一下。</p>
<p>从原版的描述和一些代码中，我发现原作者使用了 Twitter4j 这个看起来在 Java 平台非常强大的库来进行 Twitter Stream 的获取。而在 NPM 上不难找到类似的 Twitter 库，也不难使用，填好两组 Key &amp; Secret 之后简单的调用 API 就可以输出源源不断的 Tweets 来。</p>
<p>Twitter 官方提供的 Stream API 中自带了对自定义关键词的 Filter, 那么我们就来调用它。然后就碰到了目前为止第一个也是最主要最棘手的问题。</p>
<h2 id="最主要的问题"><a href="#最主要的问题" class="headerlink" title="最主要的问题"></a>最主要的问题</h2><p>问题就是：Twitter Stream Track 的关键词设置不支持 CJK 字符，而 GBF 的玩家则大部分使用日语，他们的救援推的关键词都是<code>&quot;参加者募集！&quot;</code>。</p>
<p>于是我在 Twitter Deck 中新建了一栏，使用<code>&quot;参加者募集！&quot; OR &quot;I need backup!&quot;</code>的搜索条件进行搜索并观察官方用的是什么办法支持 CJK 字符的。结果大失所望，官方的搜索也只是用 Search API 而不是 Stream API, 然后定时获取一次假装出 Stream 的感觉来“糊弄”用户。那么我想，目前找到的库对于 CJK 都没有支持的情况下应该作者是用了一些手段来支持 CJK 字符的。</p>
<p>那么也只有继续读源码了。</p>
<hr>
<p>经过大概一小时的思考，我决定暂时先将实现平台放到 .NET 上，目前 .NET Core 在跨平台上面已经比较稳定了，用 C# 写也更顺手一些。先拿这套把实现思路和一些算法给摸清楚，以后再重新用 Node.js 来实现。</p>


    
    
    
	  <div class="tags">
      <a class="tag-link" href="/tags/Everything/">Everything</a><a class="tag-link" href="/tags/Programming/">Programming</a>
	  </div>
    

  </section>
</article>
  
</section>


  <nav id="page-nav">
    
    
    <a class="next" rel="next" href="/tags/Everything/page/2/">
      <span class="text">Next</span>
      <span class="icon icon-chevron-right"></span>
    </a>
    
  </nav>
  

      <script>setLoadingBarProgress(60);</script>
    </main>
    
    <footer id="footer" class="clearfix">
  
  
	<div class="search">
	  <form name="searchform" id="searchform" class="u-search-form">
	    <input type="text" id="searchinput" class="u-search-input" placeholder="Looking for something?" />
	    <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit">
	      <span class="icon icon-search"></span>
	    </button>
	  </form>
	</div>
	

	<div class="social-wrapper">
  	
      
        <a href="mailto:phnjs211@gmail.com" class="social email"
          target="_blank" rel="external">
          <span class="icon icon-email"></span>
        </a>
      
        <a href="https://github.com/xinoassassin" class="social github"
          target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="https://twitter.com/xinoassassin" class="social twitter"
          target="_blank" rel="external">
          <span class="icon icon-twitter"></span>
        </a>
      
        <a href="http://weibo.com/XiDeAssassin" class="social sina-weibo"
          target="_blank" rel="external">
          <span class="icon icon-sina-weibo"></span>
        </a>
      
        <a href="/atom.xml" class="social rss"
          target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
    
  </div>
  
  <div>Theme <span class="codename">Typescript</span> designed by <a href="http://rakugaki.me/" target="_blank">Art Chen</a>,<br/> modified by XinoAssassin.</div>
  <div>&copy; <a href="/">随写 - XinoAssassin&#39;s Blog</a></div>
  
</footer>


    <script>setLoadingBarProgress(80);</script>
    
  </div>

  



<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/jquery.min.js"><\/script>')</script>

<script src="/js/jquery.fitvids.js"></script>
<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "google";
</script>
<script src="/js/search.js"></script>
<script src="/js/app.js"></script>


  <script>setLoadingBarProgress(100);</script>
  
</body>
</html>
